{% load static %}
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Lịch sử chấm công - {{ user_id }}</title>

  <style>
    /* ================= Reset & Body ================= */
    * { margin:0; padding:0; box-sizing:border-box; }
    body { 
        font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        background:#f0f2f5; 
        color:#333; 
        min-height:100vh; 
        display:flex; 
        flex-direction:column; 
        align-items:center; 
        width: 100%;
        overflow-y: scroll;
    }

    /* ================= Header ================= */
    header { 
        width:100%; 
        background:#1e1e2f; 
        color:white; 
        text-align:center; 
        padding:20px 0; 
        box-shadow:0 4px 6px rgba(0,0,0,0.1);
    }
    header h1 { 
      font-size:28px; 
      font-weight:700; 
      text-transform:uppercase; 
    }
    nav { 
      margin-top:10px; 
    }
    nav a { 
        color:white; 
        margin:0 20px; 
        text-decoration:none; 
        font-weight:600; 
        font-size:16px; 
        transition:color 0.2s;
    }
    nav a.active, nav a:hover { color:#00bfff; }

    /* ================= Layout ================= */
    main { 
        width:100%; 
        max-width:1100px; 
        display:flex; 
        justify-content:center; 
        padding:40px 20px; 
        flex:1;
    }

    .history-card {
        width:100%;
        max-width:980px;
        background:#fff;
        padding:30px;
        border-radius:24px;
        box-shadow:0 12px 24px rgba(0,0,0,0.15);
    }

    .history-card h2 {
        text-align:center;
        font-size:28px;
        font-weight:700;
        padding:20px 0;
        background:#f8f9fa;
        border:4px solid #ccc;
        border-radius:20px;
        text-transform:uppercase;
        box-shadow:0 6px 12px rgba(0,0,0,0.1);
        margin-bottom:30px;
        width:100%;
        color:#1e1e2f;
        background:#f9f9f9;
    }
    
    /* ================= Info Box ================= */
    .info-box {
        padding:15px 12px;
        background:#f8f9fa;
        border-radius:14px;
        border:1px solid #ddd;
        margin-bottom:25px;
    }
    .info-box p { 
      margin:5px 0; 
      font-size:20px; 
      display: inline;
      margin-right: 150px;
    }

    /* ================= Controls ================= */
    .controls {
        display:flex;
        justify-content:space-between;
        margin-bottom:20px;
        gap:20px;
        flex-wrap:wrap;
    }

    .controls input {
        padding:12px 16px;
        border-radius:14px;
        border:1px solid #ccc;
        width:240px;
        font-size:16px;
    }

    .controls button {
        padding:12px 20px;
        border-radius:14px;
        border:0;
        background:#2b8aef;
        color:white;
        cursor:pointer;
        font-size:16px;
        font-weight:bold;
    }
    .controls button:hover { background:#007bd4; }

    .back-btn {
        background:#444 !important;
    }
    .back-btn:hover {
        background:#000 !important;
    }

    /* ================= Table ================= */
    table {
        width:100%;
        border-collapse:collapse;
        border-radius:12px;
        overflow:hidden;
    }
    th, td {
        padding:14px;
        border-bottom:1px solid #eee;
        text-align:left;
    }
    th {
        background:#f1f1f1;
        font-weight:700;
        text-transform:uppercase;
    }
    tr:hover { background:#f5faff; }
  </style>
</head>

<body>
  <!-- HEADER -->
  <header>
    <h1>HỆ THỐNG CHẤM CÔNG KHUÔN MẶT</h1>
    <nav>
      <a href="{% url 'index' %}">Chấm công</a>
      <a href="{% url 'manage' %}">Quản lý nhân viên</a>
      <a href="{% url 'history' %}" class="active">Lịch sử chấm công</a>
    </nav>
  </header>

  <!-- MAIN -->
  <main>
    <section class="history-card">
      <h2>Lịch sử nhân viên: {{ user_id }}</h2>

      <!-- THÔNG TIN NHÂN VIÊN -->
      <div class="info-box">
        <p><strong>ID:</strong> {{ user_id }}</p>
        <p><strong>Họ tên:</strong> {{ name }}</p>
        <p><strong>Vị trí:</strong> {{ position }}</p>
      </div>

      <!-- Controls -->
      <div class="controls">
        <button class="back-btn" onclick="window.location.href='{% url 'history' %}'">⬅ Quay về lịch sử chung</button>

        <div style="display:flex; gap:10px;">
          <input type="text" id="newId" placeholder="Nhập ID khác...">
          <button onclick="goNewId()">Xem</button>
        </div>
      </div>

      <!-- TABLE -->
      <table>
        <thead>
          <tr>
            <th>Ngày</th>
            <th>Check-in</th>
            <th>Trạng thái</th>
            <th>Check-out</th>
            <th>Trạng thái</th>
          </tr>
        </thead>
        <tbody>
          {% if records %}
            {% for rec in records %}
            <tr>
              <td>{{ rec.date }}</td>
              <td>{{ rec.checkin|default:"-" }}</td>
              <td>{{ rec.status_in|default:"-" }}</td>
              <td>{{ rec.checkout|default:"-" }}</td>
              <td>{{ rec.status_out|default:"-" }}</td>
            </tr>
            {% endfor %}
          {% else %}
            <tr><td colspan="5">Không có dữ liệu</td></tr>
          {% endif %}
        </tbody>
      </table>
    </section>
  </main>

  <script>
    function goNewId() {
    const id = document.getElementById("newId").value.trim();
    if (!id) return;
    // dùng absolute path — tránh bị nối vào path hiện tại
    window.location.href = '/history/id/' + encodeURIComponent(id) + '/';
    }
  </script>

</body>
</html>
